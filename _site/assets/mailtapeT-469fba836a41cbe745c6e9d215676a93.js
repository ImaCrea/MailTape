$(document).ready(function(){$("#underBigTitle").fitTextV(2.5);$(".stretchMe").anystretch();$("#playButton").flowtype({minimum:679,maximum:1110,minFont:40,maxFont:250,fontRatio:4,lineRatio:0.7});$("body").flowtype({minimum:500,maximum:1110,minFont:12,maxFont:28,fontRatio:65,lineRatio:1.8});$(".musicolorLabel").lettering();$(".playlist").click(function(){$("#playButton").fadeOut("slow")});$("#playButton").click(function(){if($(window).height()+$(document).scrollTop()<=$("#player").offset().top+$("#player").height()*3){$("html, body").animate({scrollTop:$("#player").offset().top-$(window).height()+$("#player").height()*3},1000)}});var archivesLoaded=false;$(".archivesButton").click(function(){if(archivesLoaded==false){archivesLoaded=true;$("#archives").load("/Archives.html",function(){$(".stretchMe").anystretch();$("html, body").animate({scrollTop:$("#archives").offset().top},1000)})}else{$("html, body").animate({scrollTop:$("#archives").offset().top},1000)}});$("#logoLink").hover(function(){$("#logo").src="img/Logo_Mailtape.gif"},function(){$("#logo").src="img/Logo_Mailtape.png"});SC.initialize({client_id:"5eaa5aae9b1a116f58b43027a7a2206d"});function setTracksWidth(tracksDuration){var totalDuration=tracksDuration[0]+tracksDuration[1]+tracksDuration[2]+tracksDuration[3]+tracksDuration[4]+tracksDuration[5]+tracksDuration[6];var percentUnit="%";for(i=0;i<7;i++){$(".track"+(i+1)).width(((tracksDuration[i]/totalDuration)*100-1)+percentUnit)}}var tracksDuration=[1,1,1,1,1,1,1];function getTracksDuration(){var count=tracksURL.length;$.each(tracksURL,function(i,trackURL){SC.get("/resolve",{url:trackURL},function(track){tracksDuration[i]=Math.round(track.duration/1000);count--;if(count==0){setTracksWidth(tracksDuration)}})})}getTracksDuration();var archive_n=126;$(document).scroll(function(){if(archive_n>0){console.log("hauteur archive"+archive_n+" : "+$("#archive"+archive_n).offset().top);console.log("hauteur actuelle :"+$(document).scrollTop());console.log("hauteur actuelle + taille fenêtre :"+($(document).scrollTop()+$(window).height()));if($("#archive"+archive_n).offset().top<=($(document).scrollTop()+$(window).height())){console.log("archive dépassée: "+archive_n+" position : "+$("#archive"+archive_n).offset().top);archive_n=archive_n-10;$("#archive"+archive_n).show();$("#archive"+(archive_n+1)).show();$("#archive"+(archive_n+2)).show();$("#archive"+(archive_n+3)).show();$("#archive"+(archive_n+4)).show();$("#archive"+(archive_n+5)).show();$("#archive"+(archive_n+6)).show();$("#archive"+(archive_n+7)).show();$("#archive"+(archive_n+8)).show();$("#archive"+(archive_n+9)).show();console.log("archive affichée: "+archive_n+" position : "+$("#archive"+archive_n).offset().top)}}});$.each(tracksTitle,function(i,trackTitle){$("#track"+(i+1)+"_title_player").html(trackTitle);$("#track"+(i+1)+"_title_link").html(trackTitle);$("#track"+(i+1)+"_title_featured").html(trackTitle)});$.each(tracksURL,function(i,trackURL){SC.get("/resolve",{url:trackURL},function(track){$("#track"+(i+1)+"_link").prop("href",trackURL);if(track.streamable==true){$("#track"+(i+1)+"_button").prop("href",track.stream_url+"?client_id=5eaa5aae9b1a116f58b43027a7a2206d");console.log("Track:"+(i+1)+" "+track.title+" OK! (Streamable and url updated)")}else{console.error("/!\\Track:"+(i+1)+" "+track.title+" NOT STREAMABLE ! URL NOT MODIFIED !")}})})});